name: Remove Fly.io Volume

on:
  workflow_dispatch:

jobs:
  remove-volume:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸš€ Setup Fly.io CLI
        uses: superfly/flyctl-actions/setup-flyctl@master
      
      - name: ğŸ“‹ List volumes (before)
        run: flyctl volumes list -a w-best-tracker || true
        env:
          FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
      
      - name: ğŸ—‘ï¸ Destroy machine with volume
        run: flyctl machine destroy 7817642f9552d8 -a w-best-tracker --force
        env:
          FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
      
      - name: ğŸ“‹ List volumes (after)
        run: flyctl volumes list -a w-best-tracker || true
        env:
          FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
      
      - name: âœ… Done
        run: |
          echo "=========================================="
          echo "âœ… ë¨¸ì‹ ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤!"
          echo "ì´ì œ ë‹¤ìŒ ë°°í¬ ì‹œ ìƒˆ ë¨¸ì‹ ì´ ë³¼ë¥¨ ì—†ì´ ìƒì„±ë©ë‹ˆë‹¤."
          echo "=========================================="

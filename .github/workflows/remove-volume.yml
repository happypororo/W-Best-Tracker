name: Remove Fly.io Volume

on:
  workflow_dispatch:

jobs:
  remove-volume:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸš€ Setup Fly.io CLI
        uses: superfly/flyctl-actions/setup-flyctl@master
      
      - name: ğŸ“‹ List machines (before)
        run: flyctl machine list -a w-best-tracker
        env:
          FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
      
      - name: ğŸ—‘ï¸ Destroy machine with volume
        run: flyctl machine destroy 7817642f9552d8 -a w-best-tracker --force
        env:
          FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
      
      - name: ğŸ“‹ List machines (after)
        run: flyctl machine list -a w-best-tracker
        env:
          FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
      
      - name: âœ… Done
        run: |
          echo "=========================================="
          echo "âœ… ë¨¸ì‹ ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤!"
          echo "ì´ì œ fly.tomlì„ ìˆ˜ì •í•œ í›„ ë‹¤ì‹œ ë°°í¬í•˜ì„¸ìš”."
          echo "=========================================="
